<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/infor7.css">
    <link rel="stylesheet" href="css/main.css">
    <title>IAA-PROJECT</title>
</head>
<body>
  <div id="header"></div>
  <section>
    <h2>AMD RYZEN 7</h2>
    <p>
С окончанием 2017 года, в котором процессор Ryzen стал одним из самых успешных продуктов AMD, возник закономерный вопрос: что же дальше? В начале 2018 года были озвучены планы: Ryzen второго поколения должен появиться в середине года, после чего выйдет второе поколение Threadripper, на 12-нм процессе GlobalFoundries. Это еще не следующая новая микроархитектура AMD, которая, как мы знаем, будет Zen 2 на 7 нм техпроцессе. Это выпуск компонентов с некоторыми улучшениями, плюс возможность использовать производственный процесс, который позволяет поднять лимит частоты и производительности. Сегодня AMD запускает четыре процессора, мы протестировали их все.

Сразу к сути: новые процессоры

Для читателей, которые желают сразу перейти к сути, сообщаем: AMD запускает Ryzen 7 2700X, Ryzen 7 2700, Ryzen 5 2600X и Ryzen 5 2600.



Теперь Ryzen 7 2700X занимает первое место, смещая с пьедестала Ryzen 7 1800X, и ценой дополнительных 10 Вт TDP выдает базовую частоту 3,7 ГГц и турбо частоту 4,3 ГГц на восьми ядрах с одновременной многопоточностью. Это дополнительно +100 МГц и +300 МГц соответственно, что выше средних пределов разогнанного 1800X.



Важная новость: с 2700X AMD снизила максимальную стоимость топового процессора AM4 Ryzen: при запуске 1800X стоил 499 долларов и поставлялся без кулера. Да, совсем недавно 1800X упал в цене до 349 долларов, чтобы составить конкуренцию мощным процессорам Intel. 2700X заткнул за пояс обоих чемпионов, выйдя на рынок с рекомендованной розничной ценой 329 долларов США, к тому же в комплекте с лучшим кулером бизнес класса: AMD Wraith Prism RGB. AMD решительно наступает по всем фронтам: агрессивное ценообразование, максимальная производительность и лучшая комплектация, все за один раз и в одном продукте.



Ryzen 5 2600X — это шестиядерный вариант процессора, также с агрессивной частотной стратегией: 3,6 ГГц и 4,2 ГГц турбо. При 95 Вт TDP и рекомендованной розничной цене $ 229 он поставляется в комплекте с кулером AMD Wraith Spire, который, опять же, является весьма впечатляющим стоковым продуктом.

Ryzen 7 2700 и Ryzen 5 2600 — это 65-ватные версии X-аналогов, предлагающие почти те же частоты на 30 долларов дешевле. Все процессоры будут поддерживать двухканальную память DDR4-2933, что выше максимальной частоты поддержки памяти DDR4-2666 процессоров Ryzen 2017 года. Одно из главных изменений заключается в том, что теперь каждый процессор поставляется в комплекте с кулером, начиная от моделей Silent 65W Stealth и заканчивая большим Prism RGB, каждый из которых достаточен для стабильной работы процессора в турборежиме.



Планируемая AMD линейка AM4 Ryzen теперь будет выглядеть следующим образом:



Взлетая на вершину Олимпа, 2700X лишает первенства 1700X и 1800X. AMD пересмотрела свою линейку продуктов и заменила три продукта прошлого поколения двумя новыми Ryzen, возможно, исходя из показателей продаж. Как будет видно из нашего обзора, 2700X выжимает из текущего кремниевого процесса все до предела.

Полный список в конечном счете представляет собой сочетание процессоров серии Ryzen 2000 (новые), APU Ryzen серии 2000, плюс пара продуктов серии Ryzen 1000. Мы уже подробно изучили APU в недавних обзорах, и показали, что они вполне успешно заменили некоторые из оригинальных моделей первого поколения. Итак, четыре новых процессора серии 2000 теперь занимают вершину списка, но AMD часто фокусируется на новых продуктах, поэтому со временем (вполне вероятно) появится еще несколько новинок серии 2000.

Другая информация из сегодняшнего обзора

Конечно, наш обзор только начинается, ведь мы еще не поговорили об опциях. AMD использует 12-нм производственный процесс GlobalFoundries, преимущества которого очевидны. Имеется множество улучшений встроенного ПО, обновленные функции и роли для технологий AMD Precision Boost и XFR, которые могут иметь непосредственное влияние на производительность. Есть новый чипсет (вместе с 30 + материнскими платами), готовый работать с новой линейкой процессоров, а также новые или переименованные функции, такие как StoreMI. Мы хотим изучить, как эти новые продукты вписываются в долгосрочные планы AMD и соответствуют ли им в целом.

Рассмотрим эти вопросы в статье. Здесь же вы найдете и результаты тестирования.

Конкурент AMD Ryzen 2000: Intel’s Coffee Lake

В рамках запуска нового продукта, AMD предоставила обширную информацию о тестировании своих новых чипов. Из представленных данных было совершенно ясно, что новые процессоры нацелены составить конкуренцию самым современным процессорам Intel: Coffee Lake. Это контрастирует с тем, что серия Ryzen 1000, вышедшая в прошлом году, противопоставляла восьмиядерный Ryzen 7 1800X Интеловскому 8-ядерному Broadwell-E: примерно в это время Intel обновила основную линейку процессоров до шести высокочастотных ядер.

В итоге, теперь AMD предлагает сравнить Ryzen 7 2700X с Core i7-8700K и Ryzen 5 2600X с Core i5-8500K. Это важный момент — сейчас оба основных игрока на рынке процессоров x86 столкнули свои последние продукты друг против друга, лоб в лоб. Такого не случалось уже несколько поколений. Тем не менее некоторые показатели остались на своих местах с выпуска прошлого года:

Ожидается, что Intel имеет преимущество в частоте и IPC
AMD не особо отстанет по частоте и предложит больше ядер по той же цене

Корона многопоточности AMD особенно сверкает на внутреннем тестировании, однако производительность одного потока все еще отстает от конкурента. Ряд новых функций серии Ryzen 2000 должен исправить ситуацию: несколько более высокий IPC, более высокие частоты, более высокий TDP и улучшенная модель динамического повышения частоты. Мы рассмотрим их на следующих нескольких страницах.



Частота и количество ядер – это лишь часть уравнения. То, что AMD и Intel имеют разные модели кэша, сыграет значительную роль. Один из моментов, который мы увидим в этом анализе, — это сравнительные показатели кэш-памяти, и настройка, которую AMD сделала, чтобы закрыть проблемные места. Что касается цены, AMD Ryzen 7 2700X дешевле i7-8700K, + добавлен кулер Wraith Prism RGB, который легко заменяет кулер стоимостью 30-40 долларов, экономя деньги потребителя.



Показатели Ryzen 5 2600X и Core i5-8600K более схожи, чем у их старших братьев. Эти процессоры не отличаются количеством ядер, хотя у Ryzen 5 вдвое больше потоков. Для любой многопоточной рабочей нагрузки, которая в состоянии использовать одновременную многопоточность, это, вероятно, важный показатель. Core i5-8600K имеет чуть более высокую частоту ядра и, как и ожидалось, преимущество IPC. Опять же, AMD предлагает процессор, оснащенный хорошим кулером, тогда как предложение Intel – «голый» процессор.

В целом, AMD заявляет, что ее новые высококлассные процессоры покажут результаты в пределах 1-2% от конкурентов при играх 1440p, но дадут прирост 20% в «творческой производительности». У нас есть несколько способов проверить это.

Статьи в этом обзоре:

AMD запускает Ryzen 7 2700X, Ryzen 7 2700, Ryzen 5 2600X и Ryzen 5 2600
Говоря о 12nm и Zen +
Усовершенствование иерархии кэша
В переводе на IPC (instructions per cycle): все это ради 3%?
Precision Boost 2 и XFR2: Нужно больше герц
Новые чипсеты и материнские платы X470
StoreMI путь к более быстрому JBOD
Параметры тестирования
Системные тесты CPU
CPU Rendering Tests
CPU Web Tests
CPU Encoding Tests
CPU Office Tests
CPU Legacy Tests
Gaming Performance: Civilization 6
Gaming Performance: Shadow of Mordor
Gaming Performance: Rise of the Tomb Raider
Gaming Performance: Rocket League
Gaming Performance: Grand Theft Auto
Выводы: бремя конкуренции

Говоря о 12nm и Zen +

Одним из основных моментов запуска серии Ryzen 2000 является то, что эти процессоры используют производственный процесс GlobalLoundries 12LP, после процесса 14LPP первого поколения процессоров Ryzen. Как AMD, так и GlobalFoundries обсудили различия в процессах, однако стоит понимать, что цели компаний разные: AMD должна продвигать только то, что помогает ее продуктам, тогда как GlobalFoundries — крупный производитель полупроводниковой продукции с большой «клиентской базой», и может предоставлять цифры и данные «идеального сценария». В этом году мы были приглашены в GlobalFoundries Fab 8 (северной части штата Нью-Йорк), там мы смогли взять интервью у доктора Гэри Паттона, технического директора.



В этом интервью было освещено несколько интересных моментов. Во-первых, технический директор не обязательно должен заботиться о том, как называются определенные техпроцессы: их клиенты знают производительность данного процесса независимо от объявленной цифры «nm» на основании предоставленных им инструментов разработки. Во-вторых: 12LP представляет собой всего лишь несколько улучшенный процесс 14LPP – минорные изменения для улучшения производительности. Апгрейд получен в результате частичного оптического уменьшения и незначительного изменения правил производства в бек-энде и средней части производственного процесса. В прошлом такие изменения, возможно, не стали бы причиной столь громких новостей, однако клиенты GF хотят получить преимущество за счет улучшенного процесса.

В целом, GlobalFoundries заявила, что ее 12LP-процесс обеспечивает 10% -ное улучшение производительности и 15% -ное улучшение плотности элементов в сравнении с 14LPP.

Это было интерпретировано различными способами, такими как дополнительная 10% частота при той же мощности или более низкая мощность для той же частоты, или как возможность создавать чипы меньшего размера.

В рамках сегодняшнего запуска AMD разъяснила, что означал переход на 12LP процесс для серии Ryzen 2000:

Рост максимальной тактовой частоты на ~ 250 МГц (~ 6%)
Работа ядер в турбо режиме на частоте 4,2 ГГц
Снижение напряжения на ядре на ~ 50 мВ



AMD терпеливо объясняет, что на той же частоте новые процессоры серии Ryzen 2000 потребляют на 11% меньше энергии, чем серия Ryzen 1000, а это означает +16% производительности при той же мощности. Все же заявления немного неоднозначны, так как у AMD есть другие новые технологии в серии 2000, которые повлияют на производительность.

Один интересный момент заключается в том, что, хотя GF утверждает, что произошло улучшение плотности на 15%, AMD заявляет, что эти процессоры имеют те же размер матрицы и количество транзисторов, что и предыдущее поколение. В конечном итоге это, похоже, противоречит здравому смыслу – неужели AMD не захочет использовать меньшие матрицы, чтобы вместить больше чипов на пластину?

В конечном счете, новые процессоры являются почти точными копиями старых, как с точки зрения дизайна, так и микроархитектуры. AMD называет дизайн ядер Zen +, чтобы отличать их от дизайна предыдущего поколения Zen, в основном это связано с тем, как функции микроархитектуры расположены на кремнии. Многие из ключевых функций не изменились — они просто занимают меньше места, оставляя пустой кремний между элементами.



Вот очень грубое представление функций, привязанных к пути данных. Слева — дизайн 14LPP, и каждая из шести функций имеет определенный размер и подключается к шине. Между элементами находится «темный кремний» — неиспользуемый кремний, который либо рассматривается как бесполезный, либо может использоваться в качестве теплового буфера между элементами с высоким выделением энергии. Справа — представление дизайна 12LP: каждая из функций была уменьшена по размеру, попросту оставляя «темный кремний» между элементами (белые квадраты показывают оригинальный размер функции). В этом контексте количество транзисторов не изменилось, как и размер матрицы. Но если где-то в дизайне возникали термические ограничения из-за близости «горячих» элементов, теперь между ними расстояния больше, дабы элементы не мешали друг другу.

Для справки, AMD озвучивает размеры этих новых процессоров как 213 мм2, содержащие 4,8 миллиарда транзисторов, идентично дизайну кремния первого поколения. AMD подтвердила, что использует 9T-транзисторные библиотеки, как и в предыдущем поколении, хотя GlobalFoundries также предлагает дизайн 7.5T.

Итак, Zen +: новая микроархитектура или изменение технологического узла?

В конечном счете, ничего в большей части физического дизайна Zen + не является новым. Помимо изменения узла производственного процесса и вероятных незначительных корректировок, основные улучшения находятся в прошивке и поддержке:

Корректировка задержек кэша, приводящая к + 3% IPC
Поддержка увеличенной частоты DRAM для DDR4-2933
Улучшенные кривые напряжения / частоты, приводящие к + 10% производительности в целом
Улучшенная производительность при использовании Precision Boost 2
Лучшая тепловая реакция с XFR2

Усовершенствование иерархии кэша

Наибольшее внутреннее изменение у процессоров серии Ryzen 2000 — снижение времени ожидания кэша. AMD утверждает, что они смогли убрать один цикл из кэшей L1 и L2, несколько циклов из L3 и улучшить производительность DRAM. Поскольку чистая базовая IPC тесно переплетается с кэшами (размер, латентность, пропускная способность), эти цифры приводят AMD к утверждению, что новые процессоры могут обеспечить + 3% прирост IPC по сравнению с предыдущим поколением.



Цифры, предоставленные AMD:

13% улучшение латентности L1 (1.10ns против 0.95ns)
34% улучшение латентности L2 (4.6ns против 3.0ns)
16% улучшение латентности L3 (11.0ns против 9.2ns)
11% улучшение латентности памяти (74ns против 66ns на DDR4-3200)
Поддержка увеличенной частоты DRAM (DDR4-2666 против DDR4-2933)

Интересно, что в официальной презентации AMD упоминает латентность, измеряемую как время, хотя в частных беседах на нашем брифинге это обсуждалось в терминах тактовых циклов. В конечном счете латентность, измеряемая временем, может использовать преимущества других внутренних улучшений; однако настоящий инженер предпочитает обсуждать тактовые циклы.

Естественно, мы рассмотрели два аспекта этого уравнения: действительно ли показатели кэша ниже, и получим ли мы повышение IPC?

Так что там насчет кэша?

Для тестирования мы используем средство проверки латентности памяти на каждом шагу иерархии кэша одного ядра. Для этого теста мы использовали следующее:

Ryzen 7 2700X (Zen+)
Ryzen 5 2400G (Zen APU)
Ryzen 7 1800X (Zen)
Intel Core i7-8700K (Coffee Lake)
Intel Core i7-7700K (Kaby Lake)

Наиболее наглядно сравнение между процессорами AMD. Здесь у нас есть Ryzen 7 1800X первой серии, Ryzen 5 2400G APU, который объединяет ядра Zen с графикой Vega, и новый процессор Ryzen 7 2700X.


Этот график логарифмичен в обеих осях

Этот график показывает, что на каждой фазе дизайна кэша новейший Ryzen 7 2700X требует меньше циклов ядра. Самое большое различие заключается в латентности кэша L2, но L3 также имеет значительный прирост. Причина, по которой выигрыш L2 настолько велик, особенно между 1800X и 2700X, — весьма любопытна.

Когда AMD впервые запустила Ryzen 7 1800X, латентность L2 была протестирована и определена в 17 циклов. Это было довольно много — оказалось, что инженеры изначально предполагали, что L2-латентность будет 12 циклов, но нехватка времени для настройки прошивки и компоновки, прежде чем отправлять проект в производство, вынудила оставить 17 циклов как лучший компромисс, что бы дизайн был работоспособен и не вызывал проблем. С Threadripper и APU Ryzen AMD подправила дизайн достаточно, чтобы достичь латентности L2 в 12 циклов, однако в то время этот факт не освещался, несмотря на преимущества, которые он предоставляет. Теперь с серией Ryzen 2000 AMD сократила латентность до 11 циклов. Нам сказали, что это связано как с новым производственным процессом, так и с дополнительными настройками, обеспечивающими согласованность сигналов. В нашем тестировании мы фактически видели среднюю латентность L2 в 10,4 цикла, по сравнению с 16,9 циклами на Ryzen 7 1800X.

Разница в латентности L3 немного неожиданна: AMD заявила об уменьшении задержки на 16%: с 11,0 нс до 9,2 нс. Мы увидели изменение с 10,7 нс до 8,1 нс, что означает снижение с 39 до 30 циклов.

Конечно, мы не могли обойтись без сравнения AMD с Intel. И сравнение оказалось очень интересным. Теперь конфигурации кэша между Ryzen 7 2700X и Core i7-8700K различны:



AMD имеет больший кэш L2, однако кэш AMD L3 — это не инклюзивный victim-кэш, что означает, что он не может использовать предвыборку (prefetching) в отличие от кэша Intel L3.



Результат был неожиданный, ведь стало очевидным, что AMD имеет преимущество во времени ожидания в кэшах L2 и L3. В DRAM существует значительная разница, однако основные показатели производительности здесь находятся в нижних кэшах.

Мы можем расширить тест, включив в него три чипа AMD, а также ядра Intel Lake Lake и Kaby Lake.



Это график, использующий циклы, а не временную задержку. У Intel небольшое преимущество в L1, однако более крупные кэши L2 в проектах AMD Zen означают, что Intel достигнет более высокой задержки L3 раньше. И все же Intel делает свою работу быстро за счет малой задержки DRAM.

В переводе на IPC (instructions per cycle): все это ради 3%?

Вопреки распространенному мнению, увеличение IPC очень непростая задача. Попытка гарантировать, что каждый порт задействован в каждом цикле, требует наличия широких декодеров, больших очередей инструкций, быстрых кэшей и правильной конфигурации порта исполнения. Может показаться, что это легко скомпилировать, но как физика, так и экономика говорят «нет»: чип еще должен быть термически эффективным, и он должен приносить деньги компании. Каждое обновление дизайна процессоров будет направлено на то, что называют «низко висящими фруктами»: небольшие изменения, которые приносят наибольший выигрыш при минимальных усилиях. Обычно сокращение латентности кэша не является самой легкой задачей, а для инженеров не из «полупроводниковой» сферы (включая меня), это вообще звучит как большой труд ради маленького выигрыша.

Для тестирования IPC мы используем следующие правила. Каждый процессор выделяет четыре ядра без дополнительных потоков, а режимы питания отключены, так что ядра работают только на определенной частоте. DRAM настроен так, как официально поддерживает процессор, поэтому в новых процессорах это DDR4-2933, а для предыдущего поколения DDR4-2666. Недавно велись споры на тему, справедливо это или нет, и вот мнение: это тест IPC, а не тест эффективности системы. Официальная поддержка DRAM является частью технических характеристик оборудования, равно как и размер кэшей или количество портов выполнения. Запуск двух процессоров на той же частоте DRAM дает несправедливое преимущество одному из них: это либо большой оверклок / андерклок, либо отклонение от предполагаемого дизайна.

Итак, для теста был взят новый Ryzen 7 2700X, первое поколение Ryzen 7 1800X и до-Zen Bristol Ridge на базе A12-9800, основан на платформе AM4 и использует DDR4. Мы используем каждый процессор на четырех ядрах, без многопоточности, на частоте 3,0 ГГц. Приступим к тестам.



В этом графике мы использовали первое поколение Ryzen 7 1800X в качестве 100-процентного маркера, а синие столбцы — как Ryzen 7 2700X. Проблема с попыткой определить увеличение IPC на 3% состоит в том, что 3% могут легко затеряться в шуме контрольного прогона: если кэш не будет полностью установлен до запуска, мы можем столкнуться с разной производительностью. Как показано выше, большее количество тестов приходится на диапазон ± 2%.

Однако при вычислении тяжелых задач преимущество составило 3-4%: здесь есть Corona, LuxMark, CineBench и GeekBench. Мы не включили результаты подтестов GeekBench в вышеприведенный график, но большинство из них показывает прирост 2-5%.

Если мы возьмем результат Cinebench R15 nT и тесты памяти Geekbench, среднее значение прироста по всем тестам составит + 3,1% для нового Ryzen 2700X. Звучит, как звон монет для AMD.

Возвращаясь к результату Cinebench R15 nT, который показал 22-процентный прирост: у нас также было несколько других тестов IPC, выполненных на 3,0 ГГц, но с 8C / 16T (которые мы не могли сравнить с Bristol Ridge), и некоторые другие тесты также показали 20% + прирост. Вероятно, это признак того, что AMD также отрегулировала управление одновременной многопоточностью. Этот вопрос требует дальнейшего тестирования.

Общее улучшение на 10%

С учетом преимуществ нового производственного процесса 12LP у нас возник вопрос, почему AMD не переработала некоторые элементы микроархитектуры для получения еще более высокого результата. В конечном счете оказывается, что «дармовое» увеличение частоты достаточно просто перенести на тот же дизайн (как уже упоминалось ранее, дизайн 12LP основан на 14LPP с улучшением производительности). В прошлом такое решение, возможно, не упоминалось бы как отдельная линейка продуктов. Таким образом, продвижение продукта по одному и тому же дизайну — это легкая победа, позволяющая командам сосредоточиться на следующем крупном редизайне ядра.

Подытожив вышесказанное, AMD ранее уже заявляла о своих намерениях касательно Zen + Core — на CES в начале года AMD сказала, что хочет, чтобы Zen + и будущие продукты вышли за пределы «отраслевого стандарта» 7-8% производительности каждый год.



Очевидно, что 3% IPC недостаточно, поэтому AMD сочетает в себе прирост производительности с увеличением частоты +250 МГц, что составляет примерно еще 6% -ный прирост пиковой частоты, с лучшей работой в турборежиме с Precision Boost 2 / XFR 2. Это около 10% прироста, но по крайней мере, на бумаге. Посмотрим, что скажут тесты.

Precision Boost 2 и XFR2: Нужно больше герц

Одно из самых серьезных изменений в новой серии Ryzen-2000 – реализация турбо режима процессора. До этого момента (за исключением недавнего запуска APU) процессоры полагались на пошаговую реализацию функции: система определяет, сколько потоков загружено, пытается реализовать определенную частоту на этих ядрах, если это возможно, а затем обращается к справочной таблице отношения количества потоков к частоте. Цель AMD Precision Boost 2 — сделать этот процесс более динамичным.



На слайде от AMD представлена эта функция: система будет определять, какая часть запаса производительности все еще доступна, и турбировать процессор, насколько это возможно, пока не достигнет одного из ограничивающих факторов. Этими факторами могут быть любые из нижеперечисленных (хотя и не только они):

Общая пиковая мощность чипа
Индивидуальное напряжение / частотный отклик
Тепловые взаимодействия между соседними ядрами
Ограничения мощности для отдельных ядер / групп ядер
Общие тепловые характеристики

Новое программное обеспечение AMD Ryzen Master 1.3, используемое на процессоре серии Ryzen 2000, имеет несколько индикаторов для определения предельных факторов. По большей части, способ турбирования процессора и реагирования на окружающую среду будет прозрачным для пользователя.



Лучший способ проверить это в действии, с моей точки зрения, — взглянуть на энергопотребление процессоров первого и второго поколения Ryzen. Мы можем рассматривать внутреннее расчетное энергопотребление каждого ядра индивидуально, так как, к счастью, AMD оставила эти регистры открытыми, и мы получили следующие данные:





Это только потребляемая мощность ядер, а не всего процессора, которая будет включать контроллер DRAM, Infinity Fabric и процессор IO. Это означает, что мы получаем цифры, отличающиеся от номинального TDP, но опасность здесь в том, что у Ryzen 7 2700X на 10 Вт TDP выше, чем у Ryzen 7 1800X, где 2700X потребляет больше энергии, и может показаться, что это ответ TDP.    </p>
  </section>
  <script src="scroll.js">
  </script>
</script>
</body>
</html>